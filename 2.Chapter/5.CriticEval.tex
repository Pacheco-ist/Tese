\section{Critical evaluation} 
\label{sec:critical} 
 
 
 
 
In this section we want to review all the technologies that have been presented in this section but this time comment and evaluate them with a modern day's vision. It is of relevance to understand which technologies present concepts that can still be easily usable in the present and whether or not they can be adapted to function with state-of-art smartphones. There are four core concepts that will be analysed: The level of difficulty in deploying the system; the accessibility of the system towards users, mainly focused on the compatibility with modern smartphones; the scalability of the systems; and finally the privacy of the systems. 
 
 
\subsection{Deployment of beacons and scalability} 
\label{subsec:dep} 
 
 
When deploying a system, there are factors that determine how troublesome it is. One factor is the cost of the beacons. Costly beacons can be an obstacle when the number of beacons required to be deployed increases. This number depends on the range and the precision demanded. 
A system's scalability depends on the possibility of increasing the infrastructure and covered area, as well as being capable of handling an increase in the number of users.  
Due to the high number of various technologies and correspondent systems, each one will be analysed separately. 
 
 
\begin{description} 
\item [\acf{RFID}]  The analysis of this technology can be achieved through one of its systems. A recent one was presented by Han Zou et al. \cite{rfid_sys} which makes use of RFID tags and sensors, a \ac{RFID} reader and a location server. The general procedure for calculating a location is:  
\begin{itemize} 
\item The tags emit their ID, which is caught by the sensors; 
\item The sensors make use of its external power supply to allow the creation of a continuous wireless connection with the reader. It's through this connection that any captured tag information is sent; 
\item the reader receives the data and forwards it to the server where the location is obtained. 
\end{itemize} 
This system introduces one of the issues of RFID which is the high cost of readers. 
In this type of architecture, where the objective is for tracking, the deployment of beacons is equivalent to deploying sensors and readers on the areas that are to be covered. As such, increasing the covered area ends up being a costly operation. Nevertheless, since tags are cheap and a user is required to carry just one, user scalability isn't an issue. 
 
 
When envisioning a \ac{RFID} system centralised on the users, the roles associated to the tags and sensors plus readers are exchanged. As such, in this scenario, the user scalability would be costly. This occurs since each user would be required to carry a reader. With the reference points being provided by \ac{RFID} tags, the covered area expansion becomes a cheap operation. 
 
 
\item[Commodity wireless technologies] In order to study these technologies, the radar system will be used. 
 
 
Radar's architecture defines the mobile user as the broadcaster for the whole of its process, be it offline and online phases of the fingerprint method as described in section\ref{sec:related}. Radar's deployment is dependant on a grid of access points and devices for each user. Nowadays both dependencies are often unnecessary since all mobile devices can use Wi-Fi and many indoor environments are already equipped with Wi-Fi access. Due to its wide availability, these system's deployment costs low when compared to other technologies.  
Despite the architecture, P. Bahl et al\cite{radar1} comment on its consequences, imagining that in a real situation, since the number of mobile users is vastly bigger than that of base stations, the inversion of the roles would be beneficial in order to decrease the complexity and the workload. 
Passing the broadcast role to the base stations while having the mobile users function as listeners, would make it so that for a certain floor the complexity would be constant, i.e. equal to the number of stations, instead of being unstable like the number of mobile users. This changes would increase the scalability in terms of users for this system. 
 
 
Wi-Fi systems often calculate a users location through either trilateration or fingerprint. In the case of fingerprint, the one used by Radar, the complications associated to the technique can reduce scalability. When compared to other techniques, this one has additional maintenance concerns, since it's not about changing a beacon or its location but about updating the areas fingerprint. When an update is required, the whole process must be redone, leading to high costs that are associated to the coverage of the system. 
  
 
 
\item[\acf{IR}] An example of a recent system based on this technology is the Epsilon project\cite{epsilon}, which makes use of Light-emitting Diode (LED) and light sensors.   
 
 
Epsilon makes use of LEDs and their capacity to both illuminate and communicate. Through the LED's ability to instantaneously change between on and off state, it is possible to carry digital data in the visible light carrier through Pulse Width Modulation (PWM). In this system each of the used LEDs was self-contain, i.e. it knew its own location, which was insert into the data transmitted to the mobile user. The mobile user would capture the LED information through its light sensor, and consequently decode the received data from each of the available sources in order to make use of trilateration to obtain its position. 
 
 
Epsilon presents a solution which is easy to use in today's world due to the availability of LED lighting in indoor environments. Much like the systems that profit from Wi-Fi, this one is capable of profiting from the existing infrastructure for its deployment. The associated cost would then be associated to the adaptation of infrastructure to the one required by the system. For the mobile users, with the required sensors being available in most smartphones, the deployment isn't a problem. 
 
 
Epsilon's architecture was created with the intention of having a "plug-and-play" kind of system, made possible through the self-contained LEDs and location calculation made on the smartphone. These characteristics have an impact on the system's scalability. 
When presenting the system, the authors suggest a way to tackle this issue. Through the use of a back-end service for mapping the IDs of each LED to their location and by transferring the location calculation algorithm to it. This addition to the current architecture would boost the system's scalability since whenever an update or modification to the system's algorithm is required, interaction with every single device is required. 
 
 
 
 
\item[\acf{UWB}] This technology isn't practical for personal indoor location in today's world. The main reason is dependency on system specific hardware which invalidates the possibility of having a wide scale indoor location systems. 
 
 
When analysing recent \ac{UWB} system, the most common ones are tracking only systems. These systems are found useful in construction environments, where tracking crane's position is of relevance \cite{uwb-ex1}. This position tracking is accomplished by setting up a network of \ac{UWB} sensors on the construction site and placing \ac{UWB} tags on the crane or parts of it, if the whole position and pose of the vehicle are of relevance, that is to be tracked. While the addition of new target implies only the deployment of new tags, The sensors high cost are the limiting factor on the technology's deployability and scalability.  
 
 
Although the difficulty, Decawave \cite{uwb-ex2} attempted to introduce an indoor location solution. Decawave presents a \ac{UWB} transceiver in the form of a hardware module. The deployed beacons would be the traditional LED lights, with the addition of an \ac{UWB} transceiver, allowing them to communicate with the mobile user's device. Since this device would still be system-specific, the system's deployability and scalability are still reduced. 
 
 
\item [Optical] As described in section \ref{subsec:others}, optical systems are systems which are dependent on camera, as means to obtain input for indoor location. One example is the already analysed system, Epsilon, where the camera is used as a mean to capture \ac{IR} signals from LEDs.  
 
 
Other variants of camera-based systems make use of depth cameras with the intention of build dense 3D maps of indoor environments \cite{camera_ex}, which can be useful in robot navigation. Due to their high cost and incompatibility with modern day smartphone, these variants can't be used for large scale indoor location systems. 
 
 
\item[FM]  FM as a technology for indoor location can be used, but often it's discarded in favor of other possibilities. One example of a FM system was presented by Sungro Yoon et al. \cite{fm_ex}. The proposed system was capable of providing indoor location through a fingerprint method and the signals from commercial \ac{FM} radio stations. The utilisation of a publicly available signal ,i.e. existent commercial radio stations, removes the requirement for extra infrastructure. Since user's device compatibility isn't an issue, the deployment of this technology is non-existent. Nevertheless, since it makes use of the fingerprint technique, additional costs are taken into consideration, much like the case of Radar. Other than the limitation from fingerprinting, there are no more scalability concerns, since the required infrastructure is constant. 
 
 
 
 
\item[\ac{US}] Although one could analyse the technology through the cricket or the active bat system, a more recent example will be used. 
Viacheslav F. et al \cite{us_ex} present a location system based on the capability of producing \ac{US} signals using a smartphone's microphone. The presented system made use of a smartphone as the central piece, which interacted with the system through a mobile application. Although it was a promising approach on indoor location, it falls under the limitations of the technology. Since \ac{US} signals require an existing \ac{LOS} between sensor and smartphone, the infrastructural requirements are higher than many of the remaining technologies. In order to deploy the system, a grid of microphones needs to be set up in each room, which due to the low range, requires a great number of them. This condition greatly affects the scalability of the system, as well as the fact that an increase in the number of users, may cause issues related to line of sight. 
\end{description} 
 
 
 
 
\subsection{Availability on users devices} 
\label{subsec:availability} 
 
 
Creating a system that makes use of a publicly available device is only possible through smartphones. As such, this concept is entirely dependant on the smartphone's capability with interact with a technology. This capability is determined by the available sensors on the device. 
Taking the iPhone 6 as an example, one can list its sensors\cite{iphone}: Wi-Fi antenna, making commodity wireless technologies systems possible; 4.2 Bluetooth antenna, allows Bluetooth and its most recent version, Bluetooth low energy, to make use of smartphones; FM antenna, for FM radio systems; Camera and light sensor, allow for optical, as well as infrared systems; microphone, for sound-based systems; and barometer, three-axis gyroscope and accelerometer, that can be used in systems that employ dead reckoning or that used them as support sensors in hybrid systems. Apple systems have one extra possibility, in the shape of iBeacon communication capacity, a technology used by the system presented in section \ref{sec:related}. 
 
 
From the list of technologies that are available for indoor location systems, the ones that aren't made available to users through smartphones are: RFID, since these type of indoor systems make use of \ac{RFID} readers, which aren't available on smartphones; Ultra-wide band (UWB), which makes use of antennas that are not present in current devices. ZigBee systems aren't compatible with smartphones for the same reason as UWB, missing antenna. 
 
 
 
 
\subsection{Security} 
\label{subsec:sec} 
 
 
When users are presented with a location system, one of their concerns is their privacy. Privacy is described as whether or not someone other than the user, at the time of a request, has access to the obtained location. In order to analyse the different levels of privacy, one can look at the architectures of the cricket system and the active bat system, both already presented in section \ref{sec:related}. Active bat's system is tightly controlled and centralised, i.e. the position calculation and visualisation happen on the central station of the system. Although this system was capable of tracking users, instead of providing them with their location, it introduced concerns such as the user's willingness of not being tracking and the location's data security. While the first concern's solution was to disable the tag, the other required the improvement of the control access to the central station. 
 
 
On the other side of the spectrum, cricket presented a decentralised architecture. One on hand, the beacons were capable of finding their location through the others present in its vicinity, and on the other hand, the system's device was capable of providing the user with its location, without the need of an external entity. Since the device is capable of obtaining it's own position, there is no need to pass the collected information to someone else, guaranteeing the user's privacy.  
 
 
In order to obtain a more recent view on privacy, one can review the Epsilon system, which was presented in subsection \ref{subsec:dep}. Although its system is capable of working as-is, where the location is obtained on the smartphone and the privacy of the user is achieved, in a bigger scale deployment it would face scalability issues. When presenting the system, the authors suggest a way to tackle this issue. Through the use of a back-end service for mapping the IDs of each LED to their location and by transferring the location calculation algorithm to it. This modification would create the requirement of a network connection, while also removing the user's privacy.  
 
 
From this example, and many other systems/services in our lives, scalability is gained in exchange for user privacy, an exchange often accepted. 